<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Simple template</title>
</head>

<body>
<script>
    var importObject = {
        imports: {
            imported_func: function(arg) {
                console.log(arg);
            }
        }
    }
    WebAssembly.compileStreaming(fetch('simple.wasm'))
    .then(module => WebAssembly.instantiate(module, importObject))
    .then(instance => instance.exports.exported_func())
    // request = new XMLHttpRequest();
    // request.open('GET', 'simple.wasm');
    // request.responseType = 'arraybuffer';
    // request.send();

    // // request.onload = function () {
    // //     var bytes = request.response;
    // //     WebAssembly.instantiate(bytes, importObject).then(results => {
    // //         results.instance.exports.exported_func();
    // //     });
    // // };
    // fetch('simple.wasm').then(response => response.arrayBuffer())
    // .then(bytes => WebAssembly.instantiate(bytes, importObject))
    // .then(results => results.instance.exports.main());
</script>
</body>

</html>